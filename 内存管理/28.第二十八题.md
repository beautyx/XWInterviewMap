# 8.属性的实质是什么？包括哪几个部分？属性默认的关键字都有哪些？@dynamic关键字和@synthesize关键字是用来做什么的？

## 1. 属性实质： 实例变量+存取方法

##### ivar (实例变量) + getter + setter

## 2. 包括哪几部分？

*  **原子性--- nonatomic** 在默认情况下，由编译器合成的方法会通过锁定机制确保其原子性`(atomicity)`。如果属性具备 `nonatomic` 特质，则不使用`自旋锁`。
*  **读/写权限**---readwrite(读写)、readonly (只读)
*  **内存管理语义**---assign、strong、 weak、unsafe_unretained、copy
*  **方法名** - getter=<name> 、setter=<name>

## 3.属性的默认关键字

对象：

```objc
@property (atomic，strong,readwrite) UIView *view;
```

基本数据类型。

```objc
@property (atomic，assign,readwrite) int num;
```

## 4.“自动合成”( autosynthesis)

完成属性定义后，编译器会自动编写访问这些属性所需的方法，此过程叫做**“自动合成”(autosynthesis)**。需要强调的是，这个过程由编译 器在编译期执行，所以编辑器里看不到这些“合成方法”(synthesized method)的源代码。除了生成方法代码 **getter、setter** 之外，编译器还要自动向类中添加适当类型的实例变量，并且在属性名前面加下划线，以此作为实例变量的名字。
也可以在类的实现代码里通过**@synthesize** 语法来指定实例变量的名字.

## 4. @dynamic关键字和@synthesize关键字是用来做什么的？

##### @dynamic 告诉编译器,属性的setter与getter方法由用户自己实现，不自动生成。
##### @synthesize 的语义是如果你没有手动实现setter方法和getter方法，那么编译器会自动为你加上这两个方法。

如果`@synthesize`和`@dynamic`都没写，那么默认的就是

```objc
@syntheszie var = _var;

// @synthesize的语义是如果你没有手动实现setter方法和getter方法，那么编译器会自动为你加上这两个方法。
// @dynamic告诉编译器,属性的setter与getter方法由用户自己实现，不自动生成。
```

## 6.为了搞清属性是怎么实现的,反编译相关的代码,大致生成了五个东西

```objc
1. OBJC_IVAR_$类名$属性名称 ：该属性的“偏移量” (offset)，这个偏移量是“硬编码” (hardcode)，表示该变量距离存放对象的内存区域的起始地址有多远。
2. setter 与 getter 方法对应的实现函数
3. ivar_list ：成员变量列表
4. method_list ：方法列表
5. prop_list ：属性列表
也就是说我们每次在增加一个属性,系统都会在 ivar_list 中添加一个成员变量的描述,
在 method_list 中增加 setter 与 getter 方法的描述,
在属性列表中增加一个属性的描述,
然后计算该属性在对象中的偏移量,
然后给出 setter 与 getter 方法对应的实现,
在 setter 方法中从偏移量的位置开始赋值,
在 getter 方法中从偏移量开始取值,
为了能够读取正确字节数,
系统对象偏移量的指针类型进行了类型强转.
```


